<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <title>VirtuOhm Anmeldung</title>
  <meta http-equiv="Expires" name="" content="0">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="jquery-bootstrap-combined.css" rel="stylesheet">
  <link href="ohm.css" rel="stylesheet">

  <meta charset="utf-8">

  <!--Credential Handler API Polyfill-->
  <script src="https://unpkg.com/credential-handler-polyfill@2.1.3/dist/credential-handler-polyfill.min.js"></script>
</head>
  <!-- Start skript von Ohm-->

<body onload="document.defaultForm.in_username.focus();">
  <div class="wrapper-ohm">
  <div class="header-ohm hidden-print img-responsive"><div class="headertext-ohm"><small>Sie sind nicht angemeldet.</small></div></div>
  <nav class="navbar navbar-default  navbar-ohm hidden-print" role="navigation">
  <div class="navbar-header">
  <p class="navbar-text col-xs-9 col-sm-5">VirtuOhm</p></div>
  </nav>
      <div class="container content-ohm">
  <noscript>
              <div class="alert-ohm alert-ohm-bg-classes alert"><div class="alert-danger">
              <span><strong>Achtung: </strong>JavaScript ist deaktiviert. <strong><a class="text-danger" href="http://enable-javascript.com/de/" target="_blank">Bitte aktivieren Sie JavaScript</a></strong>.</span>
              </div></div></noscript>
  <div id="container"><div class="row">
  <div class="col-xs-12 col-md-6">
  <form onkeydown="if(event.keyCode == 13){self.document.defaultForm.submit();}" class="form-ohm form-horizontal form-ohm-login bv-form" target="_self" "="" data-bv-message="This value is not valid" data-bv-feedbackicons-valid="glyphicon glyphicon-ok" data-bv-feedbackicons-invalid="glyphicon glyphicon-remove" data-bv-feedbackicons-validating="glyphicon glyphicon-refresh" name="defaultForm" method="post" action="https://virtuohm.ohmportal.de/pls/portal/portal.authorisation" novalidate="novalidate"><button type="submit" class="bv-hidden-submit" style="display: none; width: 0px; height: 0px;"></button>
  <input type="hidden" name="in_instid" value="">
  <input type="hidden" name="w" value="">
  <h4>Anmeldung zu VirtuOhm</h4>
  <div class="form-group has-feedback"><label class="col-md-4 control-label">
  Benutzer:
  </label>
  <div class="col-md-8">
  <input name="in_username" type="text" class="form-control
  " onenter="submit;" data-bv-regexp-message="Bitte geben Sie Ihren Benutzernamen ein, nicht Ihre E-Mail-Adresse.&lt;br&gt;Bsp.Erika Mustermann: mustermanner oder mustermanner12345" pattern="^[a-zA-Z0-9]{1,}$" placeholder="Benutzername" data-bv-field="in_username"><i class="form-control-feedback" data-bv-icon-for="in_username" style="display: none;"></i>
  <small class="help-block" data-bv-validator="regexp" data-bv-for="in_username" data-bv-result="NOT_VALIDATED" style="display: none;">Bitte geben Sie Ihren Benutzernamen ein, nicht Ihre E-Mail-Adresse.<br>Bsp.Erika Mustermann: mustermanner oder mustermanner12345</small></div>
  </div>
  <div class="form-group"><label class="col-md-4 control-label">
  Passwort:
  </label>
  <div class="col-md-8">
  <input name="in_password" type="password" class="form-control
  " onenter="submit;" placeholder="Passwort">
  </div>
  </div>
  <input type="submit" value="Anmelden" name="submit_button" data-loading-text="laden..." class="ohm-load-button btn-ohm btn btn-sm btn-ohm-right  hidden-print" role="button">
  </form>
  <div class="alert-ohm alert-ohm-bg-classes alert"><div class="text-info">Bitte beachten, Sie müssen Cookies aktiviert haben um weitergehen zu können.</div></div>
  </div>
<div class="col-xs-12 col-md-6">

  <!-- Verifable Credentials Container -->
  <div class="panel panel-default">
    <div class="panel-heading">Erhalte ein Verifiable Credentials</div>
    <div class="container">
      <div class="card-panel">
        <a class="waves-effect waves-light btn" id="receiveButton">Receive a Credential</a>
      </div>
    
      <div class="card-panel hide" id="resultsPanel">
        <h6>Result of store() operation:</h6>
    
        <code id="storeResults"></code>
      </div>
    </div>
    </li>
    </ul>
  </div>

  <div class="panel panel-default">
  <div class="panel-heading">Exams ( Prüfungssystem )</div>
  <ul class="list-group">
  <li class="list-group-item">
  <a href="https://exams.ohmportal.de/" target="_blank">Hier gelangen Sie zu Exams</a>
  <div class="infoButton"><a href="https://virtuohm.ohmportal.de/pls/portal/portal.anmelden#" class="popover-details" data-toggle="popover" data-content="Hier finden Sie unser digitales Prüfungssystem"></a></div>
  </li>
  </ul></div>
  <div class="panel panel-default">
  <div class="panel-heading">StudyOhm ( Neues Campus-Managementsystem )</div>
  <ul class="list-group">
  <li class="list-group-item">
  <a href="https://studium.ohmportal.de/" target="_blank">Hier gelangen Sie zu StudyOhm</a>
  <div class="infoButton"><a href="https://virtuohm.ohmportal.de/pls/portal/portal.anmelden#" class="popover-details" data-toggle="popover" data-content="Dort finden Sie: Rückmeldung, Bezahlung des Studentenwerksbeitrags, Einsehen bzw. Download von Bescheinigungen, Ändern von Kontaktdaten"></a></div>
  </li>
  </ul></div>
  <div class="panel panel-default">
  <div class="panel-heading">Nachrichten aus dem Rechenzentrum</div>
  <ul class="list-group">
  <li class="list-group-item">
  <a href="https://intern.ohmportal.de/institutionen/rechenzentrum/serviceverfuegbarkeit/page.html" target="_blank">Aktuelles: Serviceverfügbarkeiten</a>
  </li>
  </ul></div>
  <div class="panel panel-default">
  <div class="panel-heading">Anwendungen für externe Besucher</div>
  <ul class="list-group">
  <li class="list-group-item">
  <a href="https://virtuohm.ohmportal.de/pls/praktikanten/pdb_admin.startpage" target="_blank">Praxisstellendatenbank</a>
  <div class="infoButton"><a href="https://virtuohm.ohmportal.de/pls/portal/portal.anmelden#" class="popover-details" data-toggle="popover" data-content="Anmeldung und Registrierung Praxisstellendatenbank der Fakultät Sozialwissenschaften"></a></div>
  </li>
  <li class="list-group-item">
  <a href="https://virtuohm.ohmportal.de/pls/praktikanten/pdb_projekten.startpage" target="_blank">Projektdatenbank</a>
  <div class="infoButton"><a href="https://virtuohm.ohmportal.de/pls/portal/portal.anmelden#" class="popover-details" data-toggle="popover" data-content="Anmeldung und Registrierung Projektdatenbank der Fakultät Sozialwissenschaften"></a></div>
  </li>
  <li class="list-group-item">
  <a href="https://virtuohm.ohmportal.de/pls/chaos/oes_web.show_anmeldung?in_type=extern" target="_blank">Online-Einschreibung zu Lehrveranstaltungen für Externe</a>
  <div class="infoButton"><a href="https://virtuohm.ohmportal.de/pls/portal/portal.anmelden#" class="popover-details" data-toggle="popover" data-content="Anmeldung und Registrierung Online Einschreibung zu Lehrveranstaltungen des Language Centers, zu Brückenkursen und Angeboten des Career Service"></a></div>
  </li>
  <li class="list-group-item">
  <a href="https://studium.ohmportal.de/" target="_blank">Studienbewerbung</a>
  <div class="infoButton"><a href="https://virtuohm.ohmportal.de/pls/portal/portal.anmelden#" class="popover-details" data-toggle="popover" data-content="Anmeldung und Registrierung Studienbewerbungsportal"></a></div>
  </li>
  </ul></div>
  </div></div></div></div>
  <div class="footer-ohm col-md-12 hidden-print" role="contentinfo">
  <div class="container">
            <ul class="nav nav-justified">
  <li><a href="https://www.th-nuernberg.de/studierendenservice" target="_blank">Studierendenservice</a></li>
  <li><a href="https://www.th-nuernberg.de/rechenzentrum" target="_blank">Rechenzentrum</a></li>
  </ul></div>
   <div class="container">2015, VirtuOhm™-Team, Technische Hochschule Nürnberg. Bei technischen Problemen und Fragen erreichen Sie uns unter <a href="mailto:virtuohm@th-nuernberg.de">VirtuOhm</a>.
        <br>Bitte beachten Sie die <a href="https://th-nuernberg.de/datenschutz" target="_blank">Datenschutzerklärung</a> der Technischen Hochschule Nürnberg.</div>
                   </div>
                   </div>
  <!-- End skript von Ohm-->


<script>
  const testCredential = {
    "@context": [
      "https://www.w3.org/2018/credentials/v1",
      "https://www.w3.org/2018/credentials/examples/v1"
    ],
    "type": "VerifiablePresentation",
    "verifiableCredential": [{
      "@context": [
        "https://www.w3.org/2018/credentials/v1",
        "https://www.w3.org/2018/credentials/examples/v1"
      ],
      "id": "http://example.edu/credentials/1872",
      "type": ["VerifiableCredential", "UniversityDegreeCredential"],
      "issuer": "https://example.edu/issuers/565049",
      "issuanceDate": "2010-01-01T19:73:24Z",
      "credentialSubject": {
        "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
        "alumniOf": {
          "id": "did:example:c276e12ec21ebfeb1f712ebc6f1",
          "name": {
            "value": "Example University",
            "lang": "en"
          }
        }
      },
      "proof": {
        "type": "RsaSignature2018",
        "created": "2017-06-18T21:19:10Z",
        "proofPurpose": "assertionMethod",
        "verificationMethod": "https://example.edu/issuers/keys/1",
        "jws": "eyJhbGciOiJSUzI1NiIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..TCYt5XsITJX1CxPCT8yAV-TVkIEq_PbChOMqsLfRoPsnsgw5WEuts01mq-pQy7UJiN5mgRxD-WUcX16dUEMGlv50aqzpqh4Qktb3rk-BuQy72IFLOqV0G_zS245-kronKb78cPN25DGlcTwLtjPAYuNzVBAh4vGHSrQyHUdBBPM"
      }
    }]
  };
  // ^ Note that:
  // 1. The Verifiable Credential is signed, and wrapped in a VerifiablePresentation.
  // 2. The wrapping VerifiablePresentation is not signed.

  async function onClickReceive() {
    // document.getElementById('storeResults').innerHTML = ''; // clear results

    // Construct the WebCredential wrapper around the credential to be stored
    const credentialType = 'VerifiablePresentation';
    const webCredentialWrapper = new WebCredential(credentialType, testCredential);

    document.getElementById('storeResults').innerText = 'Storing credential...';

    // Use Credential Handler API to store
    const result = await navigator.credentials.store(webCredentialWrapper);

    document.getElementById('resultsPanel').classList.remove('hide');
    document.getElementById('storeResults').innerText = JSON.stringify(result, null, 2);

    console.log('Result of receiving via store() request:', result);
    //
    // if(!result) {
    //   document.getElementById('storeResults').innerHTML = 'null result';
    //   return;
    // }

    // document.getElementById('storeResults').innerHTML = JSON.stringify(result.data, null, 2);
  }

  function ready(fn) {
    if(document.readyState !== 'loading') {
      fn();
    } else {
      document.addEventListener('DOMContentLoaded', fn);
    }
  }

  ready(() => {
    document.getElementById('receiveButton').addEventListener('click', onClickReceive);
    console.log('Document ready.')
  })

  const MEDIATOR = 'https://authn.io/mediator' + '?origin=' +
    encodeURIComponent(window.location.origin);

  credentialHandlerPolyfill
    .loadOnce(MEDIATOR)
    .then(console.log('Polyfill loaded.'))
    .catch(e => console.error('Error loading polyfill:', e));
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>
</html>
